<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="400"
             x:Class="ShareX.Editor.Views.Dialogs.ReplaceColorDialog"
             x:Name="ReplaceColorDialogRoot">

    <UserControl.Styles>
        <Style Selector="TextBlock.label">
             <Setter Property="Foreground" Value="#9CA3AF"/>
             <Setter Property="FontSize" Value="13"/>
             <Setter Property="FontWeight" Value="SemiBold"/>
             <Setter Property="Margin" Value="0,0,0,4"/>
        </Style>
        <Style Selector="Button.primary">
            <Setter Property="Background" Value="#3975D5"/>
            <Setter Property="Foreground" Value="#E7E9EA"/>
            <Setter Property="Padding" Value="20,8"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>
        <Style Selector="Button.secondary">
            <Setter Property="Background" Value="#3E3E3E"/>
            <Setter Property="Foreground" Value="#E7E9EA"/>
            <Setter Property="Padding" Value="20,8"/>
            <Setter Property="CornerRadius" Value="4"/>
        </Style>
    </UserControl.Styles>

    <Border Background="#2E2E2E" CornerRadius="8" Padding="24" MinWidth="350">
        <StackPanel Spacing="16">
            <!-- Header -->
            <TextBlock Text="Replace Color" 
                       FontSize="18" 
                       FontWeight="Bold" 
                       Foreground="#E7E9EA"/>
            
            <StackPanel Spacing="12">
                <!-- Target Color -->
                <StackPanel Spacing="8">
                    <TextBlock Classes="label" Text="Target Color"/>
                    <Grid ColumnDefinitions="*,Auto" Margin="0,0,0,0">
                         <TextBox x:Name="TargetColorHex" Text="#FFFFFF" Width="100" HorizontalAlignment="Left" Foreground="#E7E9EA" Background="#3E3E3E" BorderThickness="0" CornerRadius="4" Padding="8"/>
                         <Border x:Name="TargetColorPreview" Width="30" Height="30" CornerRadius="4" BorderBrush="#555" BorderThickness="1" Grid.Column="1">
                            <Border.Background>
                                <SolidColorBrush Color="White"/>
                            </Border.Background>
                         </Border>
                    </Grid>
                </StackPanel>

                <!-- Replace Color -->
                <StackPanel Spacing="8">
                    <TextBlock Classes="label" Text="Replace With"/>
                    <Grid ColumnDefinitions="*,Auto" Margin="0,0,0,0">
                         <TextBox x:Name="ReplaceColorHex" Text="#000000" Width="100" HorizontalAlignment="Left" Foreground="#E7E9EA" Background="#3E3E3E" BorderThickness="0" CornerRadius="4" Padding="8"/>
                         <Border x:Name="ReplaceColorPreview" Width="30" Height="30" CornerRadius="4" BorderBrush="#555" BorderThickness="1" Grid.Column="1">
                            <Border.Background>
                                <SolidColorBrush Color="Black"/>
                            </Border.Background>
                         </Border>
                    </Grid>
                </StackPanel>

                <!-- Tolerance Slider -->
                <StackPanel Spacing="8">
                    <Grid ColumnDefinitions="*,Auto">
                        <TextBlock Classes="label" Text="Tolerance" VerticalAlignment="Center"/>
                        <TextBlock Grid.Column="1" 
                                   Text="{Binding ElementName=ToleranceSlider, Path=Value, StringFormat='{}{0:0}%'}" 
                                   Foreground="#E7E9EA"
                                   FontWeight="Bold"/>
                    </Grid>
                    <Slider x:Name="ToleranceSlider"
                            Minimum="0" Maximum="100" Value="10"
                            TickFrequency="10" IsSnapToTickEnabled="False"
                            ValueChanged="OnValueChanged"/>
                </StackPanel>
            </StackPanel>

            <!-- Buttons -->
            <Grid ColumnDefinitions="*,Auto,Auto" Margin="0,8,0,0">
                <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                    <Button Classes="secondary" Content="Cancel" Click="OnCancelClick"/>
                    <Button Classes="primary" Content="Apply" Click="OnApplyClick"/>
                </StackPanel>
            </Grid>
        </StackPanel>
    </Border>
</UserControl>
